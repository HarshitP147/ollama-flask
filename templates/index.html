<!DOCTYPE html>
<html lang='en'>

<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>Flask Single Page</title>
</head>

<body>
    <h1>Welcome to the Flask Single Page App!</h1>
    <form method="POST">
        <label for="model">Choose a model:</label><br>
        <select id="model" name="model">
            {% for model in models %}
                <option value="{{ model }}">{{ model }}</option>
            {% endfor %}
        </select><br><br>
        <label for="prompt">Enter your prompt:</label><br>
        <textarea id="prompt" name="prompt" rows="6" cols="50"></textarea><br>
        <button type="submit">Submit</button>
        
    </form>
    {% if response %}
        <h2>Response:</h2>
        {% if selected_model %}
            <div style="margin-bottom:8px; color:#555;">Model used: <strong>{{ selected_model }}</strong></div>
        {% endif %}
        <div style="background:#f4f4f4; border-radius:8px; padding:16px; margin-top:10px; white-space:pre-wrap; font-family:monospace;">
            {{ response | e | replace('\n', '<br>') | safe }}
        </div>
    {% endif %}
    {% if response_raw %}
        <details style="margin-top:12px;">
            <summary style="cursor:pointer">Show raw response (JSON)</summary>
            <pre style="background:#222; color:#ddd; padding:12px; border-radius:6px; overflow:auto; max-height:400px;">{{ response_raw }}</pre>
        </details>
    {% endif %}
    <!-- Removed broken JS block for response -->
</body>

</html>